function initPartnerCarousel(){const e=document.querySelector(".partner-carousel-wrapper"),t=document.querySelector(".partner-carousel");if(!e||!t)return;t.style.animation="none";const n=1750;let o=0,s=!1,r=!1,i=0,l=0,c=null;function a(){o<=-1750?o+=n:o>0&&(o-=n)}function d(){t.style.transform=`translate3d(${o}px, 0, 0)`}function u(n){s=!0,r=!0,i=n,l=o,c&&(clearTimeout(c),c=null),e.style.cursor="grabbing",t.style.transition="none"}function m(e){if(!s)return;o=l+(e-i),a(),d()}function p(){s&&(s=!1,e.style.cursor="grab",c=setTimeout(()=>{r=!1},3e3))}e.addEventListener("touchstart",e=>u(e.touches[0].clientX),{passive:!0}),e.addEventListener("touchmove",e=>m(e.touches[0].clientX),{passive:!0}),e.addEventListener("touchend",p),e.addEventListener("mousedown",e=>{e.preventDefault(),u(e.clientX)}),window.addEventListener("mousemove",e=>m(e.clientX)),window.addEventListener("mouseup",p),e.addEventListener("mouseenter",()=>{s||(r=!0,c&&clearTimeout(c))}),e.addEventListener("mouseleave",()=>{s||(c=setTimeout(()=>{r=!1},3e3))}),requestAnimationFrame(function e(){s||r||(o-=.8,a(),d()),requestAnimationFrame(e)})}function initNavbar(){const e=document.getElementById("navbar");window.addEventListener("scroll",()=>{window.scrollY>50?e.classList.add("scrolled"):e.classList.remove("scrolled")})}function initMobileMenu(){const e=document.getElementById("mobileMenuBtn"),t=document.getElementById("navMenu");e&&t&&(e.addEventListener("click",()=>{t.classList.toggle("active"),e.classList.toggle("active")}),t.querySelectorAll(".nav-link").forEach(n=>{n.addEventListener("click",()=>{t.classList.remove("active"),e.classList.remove("active")})}))}function initScrollAnimations(){const e=document.querySelectorAll(".fade-in"),t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>t.observe(e))}function initBookTestModal(){const e=document.getElementById("bookTestModal"),t=document.getElementById("bookTestBtn"),n=document.getElementById("heroBookTest"),o=document.getElementById("modalClose"),s=document.getElementById("prevStep"),r=document.getElementById("nextStep"),i=document.getElementById("confirmWhatsApp"),l=document.getElementById("confirmCall");let c=1;function a(){e.classList.remove("active"),document.body.style.overflow="",c=1,d()}function d(){document.querySelectorAll(".step-dot").forEach((e,t)=>{e.classList.toggle("active",t<c)}),document.querySelectorAll(".step-content").forEach((e,t)=>{e.classList.toggle("active",t+1===c)}),s.style.display=c>1?"block":"none",r.style.display=c<2?"block":"none",i.style.display=2===c?"flex":"none",l.style.display=2===c?"flex":"none"}[t,n,...document.querySelectorAll(".trigger-booking-modal")].forEach(t=>{t&&t.addEventListener("click",t=>{t.preventDefault(),e.classList.add("active"),document.body.style.overflow="hidden"})}),o&&o.addEventListener("click",()=>{a()}),e.addEventListener("click",t=>{t.target===e&&a()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&a()}),s&&s.addEventListener("click",()=>{c>1&&(c--,d())}),r&&r.addEventListener("click",()=>{c<2&&(c++,d(),2===c&&updateBookingSummary())}),i&&i.addEventListener("click",e=>{e.preventDefault();const t=generateWhatsAppMessage();window.open(`https://wa.me/9162216654?text=${encodeURIComponent(t)}`,"_blank")})}function initTestOptions(){document.querySelectorAll('.test-option input[type="checkbox"]').forEach(e=>{e.addEventListener("change",()=>{const t=e.closest(".test-option");e.checked?t.classList.add("selected"):t.classList.remove("selected")})})}function initLabOptions(){document.querySelectorAll(".lab-option").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".lab-option").forEach(e=>{e.classList.remove("selected"),e.querySelector('input[type="radio"]').checked=!1}),e.classList.add("selected"),e.querySelector('input[type="radio"]').checked=!0})})}function updateBookingSummary(){const e=document.getElementById("bookingSummary");if(!e)return;const t=[];document.querySelectorAll(".test-option.selected").forEach(e=>{const n=e.querySelector("span:first-of-type").textContent;t.push(n)});const n=document.getElementById("customTests"),o=n?.value?.trim()||"";o&&t.push(o),e.innerHTML=`\n    <h4 style="margin-bottom: 12px; color: var(--slate-800);">Booking Summary</h4>\n    <p style="margin-bottom: 8px;"><strong>Tests:</strong> ${t.length>0?t.join(", "):"None selected"}</p>\n  `}function generateWhatsAppMessage(){const e=document.getElementById("patientName")?.value||"Not provided",t=document.getElementById("patientPhone")?.value||"Not provided",n=[];document.querySelectorAll(".test-option.selected").forEach(e=>{const t=e.querySelector("span:first-of-type").textContent;n.push(t)});const o=document.getElementById("customTests"),s=o?.value?.trim()||"";s&&n.push(s);const r=document.getElementById("patientQueries")?.value?.trim()||"";return`Hello! I would like to book a test at Health Care Diagnostic Center.\n\n*Patient Name:* ${e}\n*Phone:* ${t}\n*Tests:* ${n.join(", ")||"None selected"}\n${r?`*Queries:* ${r}`:""}\n\nPlease confirm my booking. Thank you!`}function initScrollToTop(){const e=document.getElementById("scrollTop");e&&(window.addEventListener("scroll",()=>{window.scrollY>500?e.classList.add("visible"):e.classList.remove("visible")}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}function initContactForm(){const e=document.getElementById("contactForm");e&&e.addEventListener("submit",t=>{t.preventDefault();const n=document.getElementById("name"),o=document.getElementById("email"),s=document.getElementById("phone"),r=document.getElementById("message");let i=!0;n.value.trim()?clearError(n):(showError(n,"Name is required"),i=!1),o.value.trim()&&isValidEmail(o.value)?clearError(o):(showError(o,"Valid email is required"),i=!1),s.value.trim()&&isValidPhone(s.value)?clearError(s):(showError(s,"Valid phone number is required"),i=!1),r.value.trim()?clearError(r):(showError(r,"Message is required"),i=!1),i&&(showSuccessMessage(),e.reset())})}function showError(e,t){const n=e.closest(".form-group");n.classList.add("error");let o=n.querySelector(".error-message");o||(o=document.createElement("span"),o.className="error-message",o.style.cssText="color: var(--rose-500); font-size: 0.875rem; margin-top: 4px; display: block;",n.appendChild(o)),o.textContent=t,e.style.borderColor="var(--rose-400)"}function clearError(e){const t=e.closest(".form-group");t.classList.remove("error");const n=t.querySelector(".error-message");n&&n.remove(),e.style.borderColor=""}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function isValidPhone(e){return/^[0-9]{10}$/.test(e.replace(/\D/g,""))}function showSuccessMessage(){const e=document.createElement("div");e.className="success-message",e.style.cssText="\n    background: var(--safety-green-100);\n    color: var(--safety-green-500);\n    padding: 16px 24px;\n    border-radius: 12px;\n    margin-bottom: 20px;\n    text-align: center;\n    animation: fadeIn 0.3s ease;\n  ",e.innerHTML='\n    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 8px;"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>\n    Thank you! We\'ll contact you shortly.\n  ';const t=document.getElementById("contactForm");t.parentNode.insertBefore(e,t),setTimeout(()=>{e.remove()},5e3)}function initParallax(){const e=document.querySelectorAll("[data-parallax]");window.addEventListener("scroll",()=>{const t=window.pageYOffset;e.forEach(e=>{const n=e.dataset.parallax||.5;e.style.transform=`translateY(${t*n}px)`})})}document.addEventListener("DOMContentLoaded",()=>{initNavbar(),initMobileMenu(),initScrollAnimations(),initBookTestModal(),initScrollToTop(),initTestOptions(),initLabOptions(),initContactForm(),initPartnerCarousel()});