function initPartnerCarousel(){const e=document.querySelector(".partner-carousel-wrapper"),t=document.querySelector(".partner-carousel");if(!e||!t)return;t.style.animation="none";const n=1750;let o=0,r=!1,s=!1,i=0,a=0,c=null;function l(){o<=-1750?o+=n:o>0&&(o-=n)}function d(){t.style.transform=`translate3d(${o}px, 0, 0)`}function u(n){r=!0,s=!0,i=n,a=o,c&&(clearTimeout(c),c=null),e.style.cursor="grabbing",t.style.transition="none"}function m(e){r&&(o=a+(e-i),l(),d())}function g(){r&&(r=!1,e.style.cursor="grab",c=setTimeout(()=>{s=!1},3e3))}e.addEventListener("touchstart",e=>u(e.touches[0].clientX),{passive:!0}),e.addEventListener("touchmove",e=>m(e.touches[0].clientX),{passive:!0}),e.addEventListener("touchend",g),e.addEventListener("mousedown",e=>{e.preventDefault(),u(e.clientX)}),window.addEventListener("mousemove",e=>m(e.clientX)),window.addEventListener("mouseup",g),e.addEventListener("mouseenter",()=>{r||(s=!0,c&&clearTimeout(c))}),e.addEventListener("mouseleave",()=>{r||(c=setTimeout(()=>{s=!1},3e3))}),requestAnimationFrame(function e(){r||s||(o-=.8,l(),d()),requestAnimationFrame(e)})}function initNavbar(){const e=document.getElementById("navbar");e&&window.addEventListener("scroll",()=>{e.classList.toggle("scrolled",window.scrollY>50)})}function initMobileMenu(){const e=document.getElementById("mobileMenuBtn"),t=document.getElementById("navMenu");function n(){t.classList.remove("active"),e.classList.remove("active"),e.setAttribute("aria-expanded","false")}e&&t&&(e.setAttribute("aria-controls","navMenu"),e.setAttribute("aria-expanded","false"),e.addEventListener("click",()=>{const n=!t.classList.contains("active");t.classList.toggle("active"),e.classList.toggle("active"),e.setAttribute("aria-expanded",String(n))}),t.querySelectorAll(".nav-link").forEach(e=>{e.addEventListener("click",n)}))}function initScrollAnimations(){const e=document.querySelectorAll(".fade-in");if(0===e.length||!("IntersectionObserver"in window))return;const t=new IntersectionObserver(e=>{e.forEach(e=>{e.isIntersecting&&e.target.classList.add("visible")})},{threshold:.1,rootMargin:"0px 0px -50px 0px"});e.forEach(e=>t.observe(e))}function initBookTestModal(){const e=document.getElementById("bookTestModal"),t=document.getElementById("bookTestBtn"),n=document.getElementById("heroBookTest"),o=document.getElementById("modalClose"),r=document.getElementById("prevStep"),s=document.getElementById("nextStep"),i=document.getElementById("confirmWhatsApp"),a=document.getElementById("confirmCall");if(!(e&&r&&s&&i&&a))return;let c=1;function l(){e.classList.remove("active"),document.body.style.overflow="",c=1,d()}function d(){document.querySelectorAll(".step-dot").forEach((e,t)=>{e.classList.toggle("active",t<c)}),document.querySelectorAll(".step-content").forEach((e,t)=>{e.classList.toggle("active",t+1===Math.min(c,2))}),r.style.display=c>1?"block":"none",s.style.display=c<2?"block":"none",i.style.display=2===c?"flex":"none",a.style.display=2===c?"flex":"none"}[t,n,...document.querySelectorAll(".trigger-booking-modal")].forEach(t=>{t&&t.addEventListener("click",t=>{t.preventDefault(),e.classList.add("active"),document.body.style.overflow="hidden",d()})}),o&&o.addEventListener("click",l),e.addEventListener("click",t=>{t.target===e&&l()}),document.addEventListener("keydown",t=>{"Escape"===t.key&&e.classList.contains("active")&&l()}),r.addEventListener("click",()=>{c>1&&(c-=1,d())}),s.addEventListener("click",()=>{if(1===c)return c=2,d(),void updateBookingSummary();validateBookingDetails()&&(c=2,d())}),i.addEventListener("click",e=>{if(e.preventDefault(),!validateBookingDetails())return c=2,void d();const t=generateWhatsAppMessage();window.open(`https://wa.me/9162216654?text=${encodeURIComponent(t)}`,"_blank")}),d()}function validateBookingDetails(){const e=document.getElementById("patientName"),t=document.getElementById("patientPhone");if(!e||!t)return!0;const n=e.value.trim().length>=2,o=/^[0-9]{10}$/.test(t.value.replace(/\D/g,""));return e.classList.toggle("invalid",!n),t.classList.toggle("invalid",!o),n?e.removeAttribute("aria-invalid"):e.setAttribute("aria-invalid","true"),o?t.removeAttribute("aria-invalid"):t.setAttribute("aria-invalid","true"),n&&o}function initTestOptions(){document.querySelectorAll('.test-option input[type="checkbox"]').forEach(e=>{e.addEventListener("change",()=>{const t=e.closest(".test-option");t&&t.classList.toggle("selected",e.checked)})})}function initLabOptions(){document.querySelectorAll(".lab-option").forEach(e=>{e.addEventListener("click",()=>{document.querySelectorAll(".lab-option").forEach(e=>{e.classList.remove("selected");const t=e.querySelector('input[type="radio"]');t&&(t.checked=!1)}),e.classList.add("selected");const t=e.querySelector('input[type="radio"]');t&&(t.checked=!0)})})}function updateBookingSummary(){const e=document.getElementById("bookingSummary");if(!e)return;const t=[];document.querySelectorAll(".test-option.selected").forEach(e=>{const n=e.querySelector("span:first-of-type")?.textContent;n&&t.push(n)});const n=document.getElementById("customTests")?.value?.trim();n&&t.push(n);const o=document.getElementById("preferredSlot")?.value||"Not specified";e.innerHTML=`\n    <h4 class="booking-summary-title">Booking Summary</h4>\n    <p><strong>Tests:</strong> ${t.length>0?t.join(", "):"None selected"}</p>\n    <p><strong>Preferred Slot:</strong> ${o}</p>\n  `}function generateWhatsAppMessage(){const e=document.getElementById("patientName")?.value||"Not provided",t=document.getElementById("patientPhone")?.value||"Not provided",n=document.getElementById("preferredSlot")?.value||"Not specified",o=[];document.querySelectorAll(".test-option.selected").forEach(e=>{const t=e.querySelector("span:first-of-type")?.textContent;t&&o.push(t)});const r=document.getElementById("customTests")?.value?.trim();r&&o.push(r);const s=document.getElementById("patientQueries")?.value?.trim()||"";return`Hello! I would like to book a test at Health Care Diagnostic Center.\n\n*Patient Name:* ${e}\n*Phone:* ${t}\n*Tests:* ${o.join(", ")||"None selected"}\n*Preferred Slot:* ${n}\n${s?`*Queries:* ${s}`:""}\n\nPlease confirm my booking. Thank you!`}function initScrollToTop(){const e=document.getElementById("scrollTop");e&&(window.addEventListener("scroll",()=>{e.classList.toggle("visible",window.scrollY>500)}),e.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})}))}function initContactForm(){const e=document.getElementById("contactForm");e&&"DIV"!==e.tagName&&e.addEventListener("submit",t=>{t.preventDefault();const n=document.getElementById("name"),o=document.getElementById("email"),r=document.getElementById("phone"),s=document.getElementById("message");if(!(n&&o&&r&&s))return;let i=!0;n.value.trim()?clearError(n):(showError(n,"Name is required"),i=!1),o.value.trim()&&isValidEmail(o.value)?clearError(o):(showError(o,"Valid email is required"),i=!1),r.value.trim()&&isValidPhone(r.value)?clearError(r):(showError(r,"Valid phone number is required"),i=!1),s.value.trim()?clearError(s):(showError(s,"Message is required"),i=!1),i&&(showSuccessMessage("Thank you! Your message has been prepared."),e.reset())})}function initWhatsAppInquiryForm(){const e=document.getElementById("whatsappForm"),t=document.getElementById("successAlert");e&&(e.addEventListener("submit",async n=>{n.preventDefault();const o=document.getElementById("name"),r=document.getElementById("subject"),s=document.getElementById("message");if(!o||!r||!s)return;let i=!0;if([o,r,s].forEach(e=>{const t=e.value.trim().length>0;e.closest(".form-group")?.classList.toggle("error",!t),t||(i=!1)}),!i)return;const a={name:o.value.trim(),subject:r.value.trim(),message:s.value.trim(),_subject:`Website Inquiry: ${r.value.trim()}`};let c=!1;try{c=(await fetch("https://formsubmit.co/ajax/arunkumaratul@gmail.com",{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(a)})).ok}catch(e){c=!1}const l=`https://wa.me/9162216654?text=${encodeURIComponent(`*New Inquiry from Website*\n\n*Name:* ${a.name}\n*Subject:* ${a.subject}\n\n*Message:*\n${a.message}`)}`;t&&(t.classList.add("show"),t.querySelector("span").textContent=c?"Message sent successfully. Opening WhatsApp for instant confirmation...":"Opening WhatsApp for quick delivery..."),setTimeout(()=>{window.open(l,"_blank"),e.reset(),t&&t.classList.remove("show")},900)}),e.querySelectorAll("input, textarea, select").forEach(e=>{e.addEventListener("input",()=>{e.closest(".form-group")?.classList.remove("error")})}))}function initHomepageInteractions(){const e=document.getElementById("langToggle");e&&(e.removeAttribute("onclick"),e.addEventListener("click",()=>{"function"==typeof window.toggleLanguage&&window.toggleLanguage()})),document.querySelectorAll("[data-view]").forEach(e=>{e.removeAttribute("onclick"),e.addEventListener("click",()=>{const t=e.getAttribute("data-view");t&&localStorage.setItem("serviceView",t)})})}function showError(e,t){const n=e.closest(".form-group");if(!n)return;n.classList.add("error");let o=n.querySelector(".error-message");o||(o=document.createElement("span"),o.className="error-message",o.style.cssText="color: var(--rose-500); font-size: 0.875rem; margin-top: 4px; display: block;",n.appendChild(o)),o.textContent=t,e.style.borderColor="var(--rose-400)"}function clearError(e){const t=e.closest(".form-group");if(!t)return;t.classList.remove("error");const n=t.querySelector(".error-message");n&&n.remove(),e.style.borderColor=""}function isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}function isValidPhone(e){return/^[0-9]{10}$/.test(e.replace(/\D/g,""))}function showSuccessMessage(e){const t=document.createElement("div");t.className="success-message",t.style.cssText="\n    background: var(--safety-green-100);\n    color: var(--safety-green-500);\n    padding: 16px 24px;\n    border-radius: 12px;\n    margin-bottom: 20px;\n    text-align: center;\n    animation: fadeIn 0.3s ease;\n  ",t.innerHTML=`\n    <svg width="24" height="24" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" style="vertical-align: middle; margin-right: 8px;"><path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/></svg>\n    ${e}\n  `;const n=document.querySelector("#contactForm form, #contactForm");n&&n.parentNode&&(n.parentNode.insertBefore(t,n),setTimeout(()=>t.remove(),5e3))}function initParallax(){const e=document.querySelectorAll("[data-parallax]");0!==e.length&&window.addEventListener("scroll",()=>{const t=window.pageYOffset;e.forEach(e=>{const n=Number(e.dataset.parallax||.5);e.style.transform=`translateY(${t*n}px)`})})}document.addEventListener("DOMContentLoaded",()=>{initNavbar(),initMobileMenu(),initScrollAnimations(),initBookTestModal(),initScrollToTop(),initTestOptions(),initLabOptions(),initContactForm(),initWhatsAppInquiryForm(),initHomepageInteractions(),initPartnerCarousel()});
