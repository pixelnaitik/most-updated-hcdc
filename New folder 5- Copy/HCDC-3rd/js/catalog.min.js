function getAssetPath(e){const t=e.replace(/^\/?HCDC\//,"");return window.location.pathname.includes("/services/")||window.location.pathname.includes("/about/")||window.location.pathname.includes("/contact/")||window.location.pathname.includes("/technology/")||window.location.pathname.includes("/partners/")?"../"+t:t}let currentView="single";function switchView(e){currentView=e,document.querySelectorAll(".view-toggle-btn").forEach(e=>e.classList.remove("active")),document.getElementById("single"===e?"btnSingle":"btnPackages").classList.add("active"),renderCatalog()}function renderCatalog(){const e=document.getElementById("catalogGrid");e.innerHTML="","single"===currentView?(e.className="catalog-sections",renderSingleTests(e)):(e.className="catalog-grid",renderPackages(e))}function renderSingleTests(e){const t=window.currentLang||"en",n=(e,n)=>window.translations&&window.translations[t]&&window.translations[t][e]?window.translations[t][e]:n;e.innerHTML=catalogData.singleTests.map(e=>`\n        <div class="category-section" id="cat-${e.id}">\n            <h3 class="category-heading" data-translate="${e.name_key}">\n                ${n(e.name_key,e.name)}\n            </h3>\n            <div class="tests-grid">\n                ${e.tests.map(t=>`\n                    <div class="test-card-flat" onclick="openTestModal('${e.id}', '${t.id}')" style="cursor: pointer;">\n                        <div class="test-card-top">\n                            <h4 class="test-name">${t.name}</h4>\n                            <span class="test-arrow">\n                                <svg width="20" height="20" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">\n                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>\n                                    <path d="M12 8l4 4-4 4M8 12h8" stroke-linecap="round" stroke-linejoin="round"/>\n                                </svg>\n                            </span>\n                        </div>\n                        ${t.aliases?`\n                            <p class="test-aliases">\n                                <span class="alias-label" data-translate="label_also_known">${n("label_also_known","Also known as:")}</span> ${t.aliases}\n                            </p>\n                        `:""}\n                        <div class="test-card-actions">\n                            <button class="test-view-btn" data-translate="btn_view_details">${n("btn_view_details","View Details")}</button>\n                            <button class="test-book-btn" data-translate="btn_book" onclick="event.stopPropagation(); openBookingModal('${t.name}')">${n("btn_book","Book")}</button>\n                        </div>\n                    </div>\n                `).join("")}\n            </div>\n        </div>\n    `).join("")}function renderPackages(e){const t=window.currentLang||"en",n=(e,n)=>window.translations&&window.translations[t]&&window.translations[t][e]?window.translations[t][e]:n,o="hi"===t,a=[..."undefined"!=typeof aarogyamPackages?aarogyamPackages:[],...catalogData.packages.filter(e=>!e.id.startsWith("aarogyam_1_"))];e.innerHTML=a.map(e=>{const t=o&&e.desc_hi?e.desc_hi:e.desc,a=o&&e.highlights_hi?e.highlights_hi:e.highlights;return`\n        <div class="package-card" onclick="openPackageModal('${e.id}')">\n            <div class="package-test-badge">${e.testCount||(e.includes?e.includes.length:0)}+ <span data-translate="label_tests">${n("label_tests","Tests")}</span></div>\n            <div class="package-image-container">\n                <img src="${getAssetPath(e.image)}" alt="${e.name}" loading="lazy">\n            </div>\n            <div class="package-content-body">\n                <h3 class="package-title">${e.name}</h3>\n                <p class="package-desc">${t}</p>\n                ${a?`\n                    <ul class="package-highlights-preview">\n                        ${a.slice(0,2).map(e=>`<li>${e}</li>`).join("")}\n                    </ul>\n                `:""}\n                <div class="package-meta">\n                    <span class="view-details-link" data-translate="label_view_all_tests">${n("label_view_all_tests","View All Tests")} â†’</span>\n                    <button class="package-book-btn" data-translate="btn_book" onclick="event.stopPropagation(); openBookingModal('${e.name}')">${n("btn_book","Book")}</button>\n                </div>\n            </div>\n        </div>\n    `}).join("")}function toggleCategory(e){const t=document.getElementById(`cat-${e}`),n=t.classList.contains("active");document.querySelectorAll(".category-card").forEach(e=>e.classList.remove("active")),n||t.classList.add("active")}function setupModals(){}function openTestModal(e,t){const n=catalogData.singleTests.find(t=>t.id===e).tests.find(e=>e.id===t);if(!n)return;document.getElementById("modalTitle").textContent=n.name,document.getElementById("modalDesc").textContent=n.desc,document.getElementById("modalImp").textContent=n.importance,document.getElementById("modalCond").textContent=n.conditions,document.getElementById("modalSymp").textContent=n.symptoms,document.getElementById("modalFast").textContent=n.preparation;const o=document.getElementById("modalRange");o&&n.normalRange?(o.textContent=n.normalRange,o.parentElement.style.display="block"):o&&(o.parentElement.style.display="none");document.getElementById("testDetailModal").classList.add("active"),document.body.style.overflow="hidden"}function openPackageModal(e){let t=null;if("undefined"!=typeof aarogyamPackages&&(t=aarogyamPackages.find(t=>t.id===e)),t||(t=catalogData.packages.find(t=>t.id===e)),!t)return;const n=window.currentLang||"en",o=(e,t)=>window.translations&&window.translations[n]&&window.translations[n][e]?window.translations[n][e]:t,a="hi"===n,i=a&&t.desc_hi?t.desc_hi:t.desc,s=a&&t.highlights_hi?t.highlights_hi:t.highlights;document.getElementById("pkgModalTitle").textContent=t.name;const l=document.getElementById("pkgTestCount");l&&(l.textContent=`${t.testCount||(t.includes?t.includes.length:0)}+ ${o("label_tests","Tests")}`),document.getElementById("pkgModalDesc").textContent=i;const r=document.getElementById("pkgHighlights");r&&s?(r.innerHTML=s.map(e=>`\n            <li><svg width="16" height="16" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">\n                <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>\n            </svg>${e}</li>\n        `).join(""),r.parentElement.style.display="block"):r&&(r.parentElement.style.display="none");const c=document.getElementById("pkgList");t.categories&&t.categories.length>0?(c.className="category-cards-grid",c.innerHTML=t.categories.map((e,t)=>{const a=getTranslatedCategoryName(e,n),i=getCategoryTestCount(e),s=t<2;return`\n                <div class="category-card ${s?"expanded":""}" onclick="toggleCategoryCard(this, event)">\n                    <div class="category-card-header">\n                        <div class="category-icon">\n                            ${getCategoryIcon(e.profile||"default")}\n                        </div>\n                        <div class="category-info">\n                            <h5 class="category-name">${a}</h5>\n                            <p class="category-subtitle">${s?o("label_click_to_collapse","Click to collapse"):o("label_click_to_view","Click to view tests")}</p>\n                        </div>\n                        <span class="category-badge">${i} ${o("label_tests","tests")}</span>\n                        <div class="category-toggle">\n                            <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">\n                                <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7"/>\n                            </svg>\n                        </div>\n                    </div>\n                    <div class="test-cards-container">\n                        <ul class="test-cards-grid">\n                            ${e.tests.map(e=>`\n                                <li class="test-card-item">\n                                    <span class="test-checkmark">\n                                        <svg fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24">\n                                            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7"/>\n                                        </svg>\n                                    </span>\n                                    <span class="test-name-text">${e}</span>\n                                </li>\n                            `).join("")}\n                        </ul>\n                    </div>\n                </div>\n            `}).join("")):t.includes&&(c.className="pkg-list",c.innerHTML=t.includes.map(e=>`<li>${e}</li>`).join(""));document.getElementById("packageDetailModal").classList.add("active"),document.body.style.overflow="hidden"}function getTranslatedCategoryName(e,t){t||(t=window.currentLang||"en");if(e.name)return e.name;if(e.profile&&testProfiles&&testProfiles[e.profile]){const a={lipidProfile:"profile_lipid",liverFunction:"profile_liver",kidneyFunction:"profile_kidney",thyroidProfile:"profile_thyroid",ironDeficiency:"profile_iron",cardiacRisk:"profile_cardiac",toxicElements:"profile_toxic",completeHemogram:"profile_hemogram",diabetesScreening:"profile_diabetes",vitamins:"profile_vitamins",advancedMetabolic:"profile_metabolic",autoimmune:"profile_autoimmune",anemiaPlus:"profile_anemia",homocysteine:"profile_homocysteine"}[e.profile];return a?(n=a,o=testProfiles[e.profile].name,window.translations&&window.translations[t]&&window.translations[t][n]?window.translations[t][n]:o):testProfiles[e.profile].name}var n,o;return"Other Tests"}function toggleCategoryCard(e,t){if(t.target.closest(".test-cards-container"))return;e.classList.toggle("expanded");const n=window.currentLang||"en",o=(e,t)=>window.translations&&window.translations[n]&&window.translations[n][e]?window.translations[n][e]:t,a=e.querySelector(".category-subtitle");a&&(a.textContent=e.classList.contains("expanded")?o("label_click_to_collapse","Click to collapse"):o("label_click_to_view","Click to view tests"))}function getCategoryIcon(e){const t={lipidProfile:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/></svg>',liverFunction:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4c-4 0-7 3-7 7s2 6 4 8c1 1 2 2 3 2s2-1 3-2c2-2 4-4 4-8s-3-7-7-7z"/><path stroke-linecap="round" d="M9 10c0-1 1-2 3-2s3 1 3 2"/></svg>',kidneyFunction:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 3c3.5 0 6 2.5 6 6 0 2-1 3.5-2.5 4.5 1.5 1 2.5 2.5 2.5 4.5 0 3.5-2.5 6-6 6s-6-2.5-6-6c0-2 1-3.5 2.5-4.5C7 11.5 6 10 6 8c0-3.5 2.5-5 6-5z"/><path stroke-linecap="round" d="M10 8c0 1 1 2 2 2s2-1 2-2"/></svg>',thyroidProfile:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 8v8m0-8c-2-3-5-4-7-3s-2 4 1 6c2 1 4 0 6-3zm0 0c2-3 5-4 7-3s2 4-1 6c-2 1-4 0-6-3z"/></svg>',ironDeficiency:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="8" cy="8" r="3"/><circle cx="16" cy="8" r="3"/><circle cx="12" cy="14" r="3"/><circle cx="8" cy="18" r="2"/><circle cx="16" cy="18" r="2"/></svg>',cardiacRisk:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/><path stroke-linecap="round" stroke-linejoin="round" d="M8 12h2l1-2 2 4 1-2h2"/></svg>',toxicElements:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"/></svg>',completeHemogram:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="7" cy="7" r="3"/><circle cx="17" cy="7" r="3"/><circle cx="12" cy="12" r="3"/><circle cx="7" cy="17" r="3"/><circle cx="17" cy="17" r="3"/></svg>',diabetesScreening:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 2c0 0-6 7-6 11a6 6 0 1012 0c0-4-6-11-6-11z"/><path stroke-linecap="round" d="M9 14h6m-3-3v6"/></svg>',vitamins:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="4"/><path stroke-linecap="round" d="M12 2v2m0 16v2m10-10h-2M4 12H2m15.364-6.364l-1.414 1.414M8.05 15.95l-1.414 1.414m10.728 0l-1.414-1.414M8.05 8.05L6.636 6.636"/></svg>',advancedMetabolic:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M4 4v5h5M20 20v-5h-5"/><path stroke-linecap="round" stroke-linejoin="round" d="M20.49 9A9 9 0 005.64 5.64L4 4m15.56 15.56A9 9 0 014.51 15L4 20"/></svg>',autoimmune:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"/></svg>',anemiaPlus:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><circle cx="12" cy="12" r="9"/><path stroke-linecap="round" d="M12 8v8m-4-4h8"/></svg>',homocysteine:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 3h6m-5 0v5.172a2 2 0 00.586 1.414l1.828 1.828A6 6 0 0118 17a4 4 0 01-4 4H10a4 4 0 01-4-4 6 6 0 015.586-5.586l1.828-1.828A2 2 0 0014 8.172V3"/></svg>',feverPanel:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v12m0 0a3 3 0 100 0m0 0V4m-3 12a3 3 0 106 0"/><circle cx="12" cy="16" r="2"/><path stroke-linecap="round" d="M12 8v4"/></svg>',default:'<svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"/></svg>'};return t[e]||t.default}function openBookingModal(e){document.getElementById("bookingTestName").textContent=e,document.getElementById("bookingName").value="",document.getElementById("bookingPhone").value="",document.getElementById("bookingQueries").value="";document.getElementById("bookingModal").classList.add("active"),document.body.style.overflow="hidden"}function closeBookingModal(){document.getElementById("bookingModal").classList.remove("active"),document.body.style.overflow=""}function confirmViaWhatsApp(){const e=document.getElementById("bookingName").value.trim(),t=document.getElementById("bookingPhone").value.trim(),n=document.getElementById("bookingQueries").value.trim(),o=document.getElementById("bookingTestName").textContent;if(!e||!t)return void alert("Please enter your name and phone number");const a=`https://wa.me/919162216654?text=${encodeURIComponent(`Hello! I would like to book a test.\n\n*Test:* ${o}\n*Name:* ${e}\n*Phone:* ${t}${n?"\n*Query:* "+n:""}`)}`;window.open(a,"_blank"),closeBookingModal()}function confirmViaCall(){const e=document.getElementById("bookingName").value.trim(),t=document.getElementById("bookingPhone").value.trim();if(!e||!t)return void alert("Please enter your name and phone number");window.location.href="tel:+919162216654"}function translateKey(e){return window.translations&&window.currentLang&&window.translations[window.currentLang]&&window.translations[window.currentLang][e]||e}function formatCategoryName(e){return e?e.replace(/^(cat_|service_)/,"").replace(/_/g," ").replace(/\b\w/g,e=>e.toUpperCase()):""}document.addEventListener("DOMContentLoaded",()=>{const e=localStorage.getItem("serviceView");"packages"===e?(currentView="packages",localStorage.removeItem("serviceView")):"single"===e&&(currentView="single",localStorage.removeItem("serviceView")),renderCatalog(),setupModals(),document.querySelectorAll(".view-toggle-btn").forEach(e=>e.classList.remove("active"));const t=document.getElementById("single"===currentView?"btnSingle":"btnPackages");t&&t.classList.add("active")}),window.refreshCatalogLanguage=function(){document.getElementById("catalogGrid")&&renderCatalog()},document.addEventListener("click",e=>{(e.target.matches(".modal-close")||e.target.closest(".modal-close"))&&(document.querySelectorAll(".detail-modal").forEach(e=>{e.classList.remove("active")}),document.body.style.overflow=""),e.target.matches(".detail-modal")&&(e.target.classList.remove("active"),document.body.style.overflow="")}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(document.querySelectorAll(".detail-modal.active").forEach(e=>{e.classList.remove("active")}),document.body.style.overflow="")});